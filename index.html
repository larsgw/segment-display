<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <title>Segment Display playground</title>
    <style>
      svg { margin: 0 -8px; }

      #theme1:checked ~ svg #digits { fill: url(#gradient-digits1); }
      #theme1:checked ~ svg #background { fill: url(#gradient-background1); }
      #theme1:checked ~ svg #digits, #theme1:checked ~ svg #background { filter: url(#noise); }
      #theme1:checked ~ svg { background: #333; }

      #theme2:checked ~ svg #digits { fill: black; }
      #theme2:checked ~ svg #background{ fill: white; }
      #theme2:checked ~ svg { background: #ccc; }

      #theme3:checked ~ svg #digits { fill: url(#gradient-digits2); filter: url(#glow); }
      #theme3:checked ~ svg #background{ fill: url(#gradient-background2); }
      #theme3:checked ~ svg { background: black; }

      /* fill: #d6b33f; */
      /* fill: #9d7a52; */
    </style>
  </head>
  <body>
    Theme:
    <input type="radio" name="theme" id="theme3" checked /><label for="theme3">Colored</label>
    <input type="radio" name="theme" id="theme1" /><label for="theme1">Colored (bad angle)</label>
    <input type="radio" name="theme" id="theme2" /><label for="theme2">Black on white</label>

    <p>Click/drag to paint. <button id="reset">Reset</button></p>

    <p>
      Examples:
      <a href="https://treinposities.nl/foto/67902" target="_blank">Den Helder</a>
      <a href="https://treinposities.nl/foto/40853" target="_blank">Den Haag Centraal</a>
      <a href="https://commons.wikimedia.org/wiki/File:Bestemming_Maastricht_Randwijck.jpg" target="_blank">Maastricht Randwijck</a>
    </p>

    <svg width="1920" height="600">
      <defs>
        <linearGradient id="gradient-background1" gradientUnits="userSpaceOnUse">
          <stop offset="0%" stop-color="rgba(181,93,99,1)"></stop>
          <stop offset="62%" stop-color="rgba(236,196,62,1)"></stop>
          <stop offset="100%" stop-color="rgba(172,109,6,1)"></stop>
        </linearGradient>
        <linearGradient id="gradient-digits1" gradientUnits="userSpaceOnUse">
          <stop offset="0%" stop-color="rgba(245,219,89,1)"></stop>
          <stop offset="62%" stop-color="rgba(255,235,169,1)"></stop>
          <stop offset="100%" stop-color="rgba(255,207,129,1)"></stop>
        </linearGradient>
        <linearGradient id="gradient-background2" gradientUnits="userSpaceOnUse" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" stop-color="rgba(2,47,8,1)"></stop>
          <stop offset="62%" stop-color="rgba(19,54,79,1)"></stop>
          <stop offset="100%" stop-color="rgba(48,72,92,1)"></stop>
        </linearGradient>
        <linearGradient id="gradient-digits2" gradientUnits="userSpaceOnUse">
          <stop offset="0%" stop-color="rgba(251,186,20,1)"></stop>
          <stop offset="62%" stop-color="rgba(250,234,41,1)"></stop>
          <stop offset="100%" stop-color="rgba(255,207,129,1)"></stop>
        </linearGradient>
        <filter id="glow">
          <feGaussianBlur stdDeviation="2" />
          <feMerge>
            <feMergeNode/>
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>
        <filter id='noise'>
          <feTurbulence type='fractalNoise' baseFrequency='6.29' numOctaves='6' stitchTiles='stitch'/>
          <feColorMatrix type="matrix" values="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"/>
          <feBlend in2="SourceGraphic" mode="luminosity" />
          <feComposite in2="SourceGraphic" operator="in" />
        </filter>
      </defs>
      <g id="background"></g>
      <g id="digits"></g>
    </svg>

    <script>
      (function () {
        // SETUP
        const TYPE_A = [
          (x, y) => `M${x},${y + 0.1} H${x + 4.8} L${x},${y + 7.8} Z`,
          (x, y) => `M${x + 10},${y + 0.1} H${x + 5.2} L${x + 10},${y + 7.8} Z`,
          (x, y) => `M${x + 5},${y + 0.1} L${x + 10},${y + 8.2} V${y + 9.9} H${x} V${y + 8.2} Z`
        ]
        const TYPE_B = [
          (x, y) => `M${x},${y + 9.9} H${x + 4.8} L${x},${y + 2.2} Z`,
          (x, y) => `M${x + 10},${y + 9.9} H${x + 5.2} L${x + 10},${y + 2.2} Z`,
          (x, y) => `M${x + 5},${y + 9.9} L${x + 10},${y + 1.8} V${y + 0.1} H${x} V${y + 1.8} Z`
        ]
        const TYPE_C = [
          (x, y) => `M${x},${y + 0.1} H${x + 10} V${y + 6.9} H${x + 0} Z`
        ]
        const TYPE_D = [
          (x, y) => `M${x},${y + 0.1} H${x + 9.9} L${x},${y + 6.8} Z`,
          (x, y) => `M${x + 10},${y + 0.2} V${y + 6.9} H${x + 0.1} Z`
        ]

        const COLUMN = [
          [ 0, TYPE_A],
          [10, TYPE_B],
          [20, TYPE_A],
          [30, TYPE_B],
          [40, TYPE_A],
          [50, TYPE_A],
          [60, TYPE_B],
          [70, TYPE_C],
          [77, TYPE_D]
        ]

        const COLUMNS = 50
        const COLUMN_GAP = 2//3
        const COLUMN_WIDTH = 10

        const CANVAS_WIDTH = COLUMNS * (COLUMN_WIDTH + COLUMN_GAP) - COLUMN_GAP
        const CANVAS_HEIGHT = COLUMN.length * COLUMN_WIDTH
        document.querySelector('svg').setAttribute('viewBox', `0 0 ${CANVAS_WIDTH} ${CANVAS_HEIGHT}`)

        for (let column = 0; column < COLUMNS; column++) {
//           const gap = (COLUMN_GAP * (1 - 2/3)) * Math.floor(column / 2) + (COLUMN_GAP * (1 + 2/3)) * Math.ceil(column / 2)
//           const x = column * COLUMN_WIDTH + gap
          
          const x = column * (COLUMN_GAP + COLUMN_WIDTH)
          for (const [y, paths] of COLUMN) {
            for (const shape of paths) {
              const path = document.createElementNS('http://www.w3.org/2000/svg', 'path')
              path.setAttribute('d', shape(x, y))
              document.getElementById('background').appendChild(path.cloneNode())
              path.setAttribute('opacity', '0')
              document.getElementById('digits').appendChild(path)
            }
          }
        }

        // STATES
        const STATES = {
          empty: '',
          // alphabet
          // ..CD...H....M....R........
          // a.cde.ghijkl.no..rst..w...
          abc_kct: '111111111111111111111001000000000010111010000011000000011101100101011011000000100000000000100010000000011111111111011001000000111000000000111011000000111000000000111011000000101000000000101010000000111000000000000001111111111111111111011011000000111000000000101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
          abc_gMihwij: '000000011111111111011011000000111000000000111011000000111000000000111011000000111111111111111110101111111111111111111010000100101011010000000000000010011101100000000000011111111111111111111001111000111111111111111011111111111111111111111010000000111000000000000000000000111000000000000000000000101111111111111001000000111111111111011010000000000000000000111000000000001111111111111000000000000000000000111000000000111111111111101001111000111111111111111000000000000000000000000011111000111111111111111110000000000000000000000000000000000000000000000000',
          abc_dlDHrC: '000000011111111111011001000000111000000000111011000000111000000000111011111111111111111111111010111111111111111111111010111111111111111111111001111000000000000000111011111000000000000000111011101111111111111111101010111111111111111111111001000000000111000000000011000000000111000000000011111111111111111111111010000000111111111111111001000000011101100000000011000000111000000000000011000000101000000000000010011111111111111111011001111000000000000000111011111000000000000000111011101011000000000011101010000000000000000000000000000000000000000000000000',
          abc_Rosena: '111111111111111111111001111000000111111010000011101111111101101111111010000000011111111111011001000000111000000000111011000000111000000000111011000000101111111111101010000000011111111000011001000000111000111000111011000000111000111000111011000000101000101111101010000000011111111111011001000000111000111000111011000000111000111000111011000000101111111000101010000000111111111111111001000000111000000000000011000000111000000000000011000000101111111111111010000000011000011111011001000000111000111000111011000000111000111000111011000000101111111111111010',
          // digits
          small_numerals: '000000111111111111111000000000011000011111111000000000101111111000111000000000011000011000011000000000101111111111101000000000101101101010000000000000011011011111111000000000111111111000111000000000101000101111101000000000011101111101011000000000101000101011101000000000011000000011001000000000101111111100000000000000011101101101011000000000101011011011101000000000011101101010011000000000101011011111101000000000011101101111011000000000101011011111101000',
          numerals: '111111111111111111111000011000000010011111111000101111111101000000111000011000000010010000011000101111111101101111101000001101101011010000000000001011011111111111111000011111111011000000111000111000000100101111111000011111111101101111011000101000101011011111101000011000000010011111001000101111111101100000000000011101101101101111011000101011011011011111101000011101101011000101011000101011011111111111101000011111111101101111011000101111111011011111101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
          text_figures: '000000111111111111111000000000011000011111011000000000101101100000101000000000011101000011000001000000101011011111111110000000101101101111011000000000011011011111111111000000011101101111000011000000111000000101111110011111111101101111011000101000101011011111101000000000111000000000000000000000111111111111111110011011011101101111011000101101101011011111101000000000011101101111011001000000101011011111111110000000011101101111011000000000101011011111101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
          // names
          Zwolle: '011000000010011111111000111010011101100000111000111101100000000000101000000000000000000000000000000000111111111111011000000000000000000000111000000000001111111111111000000000000000000000111000000000111111111111101000000000000000000000000000000000011111111111011000000000111000000000111000000000111000000000111000000000101111111111101000000000000000000000000000111111111111111111111000000000000000000000000000111111111111111111111000000000000000000000000000000000011111111111011000000000111000111000111000000000111000111000111000000000101111111000101000',
//           Maastricht: '101111111111111111111000000100101011010000000000000010011101100000000000011111111111111111111000000000000000000000000000000000011000011111011000000000111000111000111000000000111000111000111000000000101111111111111000000000000000000000000000000000011000011111011000000000111000111000111000000000111000111000111000000000101111111111111000000000000000000000000000000000011111111000011000000000111000111000111000000000111000111000111000000000101000101111101000000000000000000000000000000000111000000000000000111111111111111111011000000000111000000000101000000000000000000000000000000000111111111111111000000000011101100000000000000000111000000000000000000000101000000000000000000000000000000000000000111000111111111111111000000000000000000000000000000000011111111111011000000000111000000000111000000000111000000000111000000000101000000000101000000000000000000000000000111111111111111111111000000000111000000000000000000000111000000000000000000000101111111111111000000000000000000000000000000000111000000000000000111111111111111111011000000000111000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'
          Maastricht: '000000000000000000000000101111111111111111111000000100101011010000000000000010011101100000000000011111111111111111111000000000000000000000000000000000011000011111011000000000111000111000111000000000111000111000111000000000101111111111111000000000000000000000000000000000011000011111011000000000111000111000111000000000111000111000111000000000101111111111111000000000000000000000000000000000011111111000011000000000111000111000111000000000111000111000111000000000101000101111101000000000000000000000000000000000111000000000000000111111111111111111011000000000111000000000101000000000000000000000000000000000111111111111111000000000011101100000000000000000111000000000000000000000101000000000000000000000000000000000000000111000111111111111111000000000000000000000000000000000011111111111011000000000111000000000111000000000111000000000111000000000101000000000101000000000000000000000000000111111111111111111111000000000111000000000000000000000111000000000000000000000101111111111111000000000000000000000000000000000111000000000000000111111111111111111011000000000111000000000101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
          Roosendaal: '000000000000000000000000111111111111111111111000111000000111111010000000101111111101000101111000000000000000000000000000000000011111111111011000000000111000000000111000000000111000000000111000000000101111111111101000000000000000000000000000000000011111111111011000000000111000000000111000000000111000000000111000000000101111111111101000000000000000000000000000000000011111111000011000000000111000111000111000000000111000111000111000000000101000101111101000000000000000000000000000000000011111111111011000000000111000111000111000000000111000111000111000000000101111111000101000000000000000000000000000000000111111111111111000000000111000000000000000000000111000000000000000000000101111111111111000000000000000000000000000000000011111111111011000000000111000000000111000000000111000000000111000111111111111111111111000000000000000000000000000000000011000011111011000000000111000111000111000000000111000111000111000000000101111111111111000000000000000000000000000000000011000011111011000000000111000111000111000000000111000111000111000000000101111111111111000000000000000000000000000111111111111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'
        }
        // Export: [...document.querySelectorAll('#digits path')].map(path => path.getAttribute('opacity')).join('')

        const paths = document.querySelectorAll('#digits path')
        const hit = new Set()
        function paintState (state) {
          for (const [index, path] of Object.entries([...paths])) {
            const a = state[index] === '1'
            const b = path.getAttribute('opacity') === '1'
            if (a !== b) {
              toggle(path)
            }
          }
          hit.clear()
        }
        paintState(STATES.Roosendaal)

        // INTERACT
        let paint = false
        function toggle (target) {
          const opacity = target.getAttribute('opacity') === '1' ? '0' : '1'
          target.setAttribute('opacity', opacity)
          hit.add(target)
        }
        for (const path of paths) {
          path.addEventListener('mouseenter', function ({ target }) {
            if (paint && !hit.has(target)) {
              toggle(target)
            }
          })
          path.addEventListener('mousedown',  ({ target }) => { toggle(target) })
        }
        document.addEventListener('mousedown', () => { paint = true })
        document.addEventListener('mouseup', () => { paint = false; hit.clear() })
        document.getElementById('reset').addEventListener('click', () => { paintState(STATES.empty) })
      })()
    </script>
  </body>
</html>
